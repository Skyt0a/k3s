---
apiVersion: v1
kind: ConfigMap
metadata:
  name: frpc
data:
  # property-like keys; each key maps to a simple value
  player_initial_lives: "3"
  ui_properties_file_name: "user-interface.properties"

  # file-like keys
  "frpc.ini": "
[common]\n
server_addr = {{ .Values.subDomain }}.bazin-jeremy.com\n
server_port = 7000\n
tls_enable = true\n
dial_server_timeout = 60\n
\n
[nextcloud-dev-http]\n
type = http\n
local_ip = localhost\n
local_port = 80\n
remote_port = 80\n
subdomain = dev2\n
\n
[nextcloud-dev-https]\n
type = https\n
local_ip = localhost\n
local_port = 8443\n
remote_port = 443\n
subdomain = dev2\n
"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fprc
spec:
  selector:
    matchLabels:
      app: frpc
  template:
    metadata:
      labels:
        app: frpc
    spec:
      containers:
      - name: fprc
        image: snowdreamtech/frpc:latest
        resources:
          limits:
            memory: "128Mi"
            cpu: "500m"
        volumeMounts:
        - name: config
          mountPath: /etc/frp/frpc.ini
          readOnly: true

      volumes:
      - name: config
        configMap:
          name: frpc-config

